"use strict";(self.webpackChunkmemorix_frontend=self.webpackChunkmemorix_frontend||[]).push([[775],{7775:(e,t,r)=>{r.r(t),r.d(t,{default:()=>be});var n=r(6540),a=r(4348),o=r(1014),i=r(1610);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){l=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function m(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{m({},"")}catch(e){m=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:k(e,r,c)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var h="suspendedStart",d="suspendedYield",v="executing",y="completed",g={};function b(){}function E(){}function w(){}var N={};m(N,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(T([])));S&&S!==r&&n.call(S,i)&&(N=S);var L=w.prototype=b.prototype=Object.create(N);function O(e){["next","throw","return"].forEach((function(t){m(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(a,o,i,l){var u=p(e[a],e,o);if("throw"!==u.type){var s=u.arg,m=s.value;return m&&"object"==c(m)&&n.call(m,"__await")?t.resolve(m.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(m).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(u.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function k(t,r,n){var a=h;return function(o,i){if(a===v)throw Error("Generator is already running");if(a===y){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=C(c,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===h)throw a=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=v;var u=p(t,r,n);if("normal"===u.type){if(a=n.done?y:d,u.arg===g)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=y,n.method="throw",n.arg=u.arg)}}}function C(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var o=p(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(c(t)+" is not iterable")}return E.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:E,configurable:!0}),E.displayName=m(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,m(e,s,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},O(j.prototype),m(j.prototype,u,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new j(f(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(L),m(L,s,"Generator"),m(L,i,(function(){return this})),m(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;P(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){f(o,n,a,i,c,"next",e)}function c(e){f(o,n,a,i,c,"throw",e)}i(void 0)}))}}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const v=function(){var e,t=(0,o.A)().user,r=h((0,n.useState)([]),2),a=r[0],c=r[1],u=h((0,n.useState)(!0),2),m=u[0],f=u[1],d=h((0,n.useState)(null),2),v=d[0],y=d[1],g=h((0,n.useState)(1),2),b=g[0],E=g[1],w=h((0,n.useState)(1),2),N=w[0],x=w[1],S=h((0,n.useState)(""),2),L=S[0],O=S[1],j=h((0,n.useState)(""),2),k=j[0],C=j[1];(0,n.useEffect)((function(){_()}),[b,L,k]);var _=function(){var e=p(l().mark((function e(){var t,r,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),y(null),t=s(s({},L&&{search:L}),k&&{role:k}),e.prev=4,e.next=7,(0,i.getAdminUsers)(b,10,t);case 7:(r=e.sent)&&r.data&&Array.isArray(r.data)?(c(r.data),x((null===(n=r.pagination)||void 0===n?void 0:n.pages)||1)):0===a.length&&y("Received user data in an unexpected format"),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(4),404!==e.t0.status){e.next=19;break}0===a.length&&y("User management endpoint not available"),e.next=20;break;case 19:throw e.t0;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(0),y("Failed to load users. Keeping existing data.");case 26:return e.prev=26,f(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,22,26,29],[4,12]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=p(l().mark((function e(t,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.updateUserRole)(t,r);case 3:c(a.map((function(e){return e._id===t?s(s({},e),{},{role:r}):e}))),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),y("Failed to update user role");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),A=function(){var e=p(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.verifyUser)(t);case 3:c(a.map((function(e){return e._id===t?s(s({},e),{},{verified:!0}):e}))),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),y("Failed to verify user");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=p(l().mark((function e(t,r){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.giftSubscription)(t,r,1,"Enjoy your complimentary subscription!");case 3:n={plan_name:r.charAt(0).toUpperCase()+r.slice(1),subscribed_at:new Date,payment_method:"Manual",status:"vip"===r?"lifetime":"active",expiry_date:"free"===r?null:new Date(Date.now()+2592e6)},c(a.map((function(e){return e._id===t?s(s({},e),{},{subscription:n}):e}))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),y("Failed to gift subscription");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}();if(m)return n.createElement("div",{className:"loading-container"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading users..."));if(v)return n.createElement("div",{className:"error-container"},n.createElement("h2",null,"Error"),n.createElement("p",null,v),n.createElement("button",{onClick:_,className:"primary-button"},"Retry"));var R="abdmosh2000@gmail.com"===(null==t||null===(e=t.email)||void 0===e?void 0:e.toLowerCase());return n.createElement("div",{className:"users-table-container"},n.createElement("div",{className:"users-filters"},n.createElement("div",{className:"filter-group"},n.createElement("label",{htmlFor:"search"},"Search:"),n.createElement("input",{type:"text",id:"search",className:"search-input",placeholder:"Search by name or email",value:L,onChange:function(e){return O(e.target.value)}})),n.createElement("div",{className:"filter-group"},n.createElement("label",{htmlFor:"role"},"Role:"),n.createElement("select",{id:"role",className:"filter-select",value:k,onChange:function(e){return C(e.target.value)}},n.createElement("option",{value:""},"All Roles"),n.createElement("option",{value:"user"},"User"),n.createElement("option",{value:"moderator"},"Moderator"),n.createElement("option",{value:"content_curator"},"Content Curator"),n.createElement("option",{value:"admin"},"Admin")))),n.createElement("table",{className:"users-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"User"),n.createElement("th",null,"Email"),n.createElement("th",null,"Role"),n.createElement("th",null,"Subscription"),n.createElement("th",null,"Status"),n.createElement("th",null,"Actions"))),n.createElement("tbody",null,a.map((function(e){return n.createElement("tr",{key:e._id},n.createElement("td",null,e.name),n.createElement("td",null,e.email),n.createElement("td",null,function(e){var t="role-badge ";switch(e){case"admin":t+="role-admin";break;case"moderator":t+="role-moderator";break;case"content_curator":t+="role-curator";break;default:t+="role-user"}return n.createElement("span",{className:t},e)}(e.role)),n.createElement("td",null,"string"==typeof e.subscription?n.createElement("span",{className:"subscription-badge ".concat(e.subscription,"-subscription")},e.subscription.charAt(0).toUpperCase()+e.subscription.slice(1)):e.subscription&&e.subscription.plan_name?n.createElement("div",{className:"subscription-info"},n.createElement("span",{className:"subscription-badge ".concat(e.subscription.plan_name.toLowerCase(),"-subscription")},e.subscription.plan_name),n.createElement("span",{className:"subscription-status"},"lifetime"===e.subscription.status?"Lifetime":"active"===e.subscription.status?"Active":e.subscription.status),e.subscription.expiry_date&&n.createElement("span",{className:"subscription-expiry"},"Expires: ",new Date(e.subscription.expiry_date).toLocaleDateString())):n.createElement("span",{className:"subscription-badge free-subscription"},"Free")),n.createElement("td",null,e.verified?n.createElement("span",{style:{color:"#2ECC71"}},"‚úì Verified"):n.createElement("span",{style:{color:"#E74C3C"}},"‚úó Unverified")),n.createElement("td",null,n.createElement("div",{className:"user-actions"},(R||"abdmosh2000@gmail.com"!==e.email.toLowerCase())&&n.createElement(n.Fragment,null,n.createElement("div",{className:"dropdown-menu"},n.createElement("button",{className:"action-button edit-button"},"üëë Role Actions"),n.createElement("div",{className:"dropdown-content"},n.createElement("button",{onClick:function(){return P(e._id,"user")},className:"user"===e.role?"active":""},"Set as User"),n.createElement("button",{onClick:function(){return P(e._id,"moderator")},className:"moderator"===e.role?"active":""},"Set as Moderator"),n.createElement("button",{onClick:function(){return P(e._id,"content_curator")},className:"content_curator"===e.role?"active":""},"Set as Content Curator"),R&&n.createElement("button",{onClick:function(){return P(e._id,"admin")},className:"admin"===e.role?"active":""},"Set as Admin"))),!e.verified&&n.createElement("button",{className:"action-button verify-button",onClick:function(){return A(e._id)}},"‚úì Verify"),n.createElement("div",{className:"dropdown-menu"},n.createElement("button",{className:"action-button gift-button"},"üéÅ Gift Subscription"),n.createElement("div",{className:"dropdown-content"},n.createElement("button",{onClick:function(){return T(e._id,"free")}},"Basic (Free)"),n.createElement("button",{onClick:function(){return T(e._id,"premium")}},"Premium (1 Month)"),n.createElement("button",{onClick:function(){return T(e._id,"lifetime")}},"Lifetime")))))))})))),n.createElement("div",{className:"pagination"},n.createElement("button",{onClick:function(){return E((function(e){return Math.max(e-1,1)}))},disabled:1===b},"Previous"),n.createElement("span",null,"Page ",b," of ",N),n.createElement("button",{onClick:function(){return E((function(e){return Math.min(e+1,N)}))},disabled:b===N},"Next")))};function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(){g=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:k(e,r,c)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function b(){}function E(){}function w(){}var N={};u(N,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(T([])));S&&S!==r&&n.call(S,i)&&(N=S);var L=w.prototype=b.prototype=Object.create(N);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(a,o,i,c){var l=m(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==y(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function k(t,r,n){var a=f;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=C(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=d,n.method="throw",n.arg=u.arg)}}}function C(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(y(t)+" is not iterable")}return E.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:E,configurable:!0}),E.displayName=u(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,l,"GeneratorFunction")),e.prototype=Object.create(L),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new j(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(L),u(L,l,"Generator"),u(L,i,(function(){return this})),u(L,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;P(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){N(o,n,a,i,c,"next",e)}function c(e){N(o,n,a,i,c,"throw",e)}i(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const O=function(){var e=S((0,n.useState)([]),2),t=e[0],r=e[1],a=S((0,n.useState)(!0),2),o=a[0],c=a[1],l=S((0,n.useState)(null),2),u=l[0],s=l[1],m=S((0,n.useState)(1),2),f=m[0],p=m[1],h=S((0,n.useState)(1),2),d=h[0],v=h[1],y=S((0,n.useState)(""),2),b=y[0],w=y[1],N=S((0,n.useState)(""),2),L=N[0],O=N[1];(0,n.useEffect)((function(){j()}),[f,b,L]);var j=function(){var e=x(g().mark((function e(){var n,a,o;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),s(null),n=E(E({},b&&{search:b}),L&&{public:L}),e.prev=4,e.next=7,(0,i.getAdminCapsules)(f,10,n);case 7:(a=e.sent)&&a.capsules?(r(a.capsules),v((null===(o=a.pagination)||void 0===o?void 0:o.pages)||1)):0===t.length&&s("No content data available"),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(4),404!==e.t0.status){e.next=19;break}0===t.length&&s("Content management endpoint not available"),e.next=20;break;case 19:throw e.t0;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(0),s("Failed to load capsules. Keeping existing data.");case 26:return e.prev=26,c(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,22,26,29],[4,12]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=x(g().mark((function e(n,a){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.updateCapsulePublicStatus)(n,!a);case 3:r(t.map((function(e){return e._id===n?E(E({},e),{},{isPublic:!a}):e}))),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),s("Failed to update capsule");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),C=function(){var e=x(g().mark((function e(n,a){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,i.featureCapsule)(n,!a);case 3:r(t.map((function(e){return e._id===n?E(E({},e),{},{featured:!a}):e}))),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),s("Failed to feature capsule");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),_=function(){var e=x(g().mark((function e(n){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to remove this capsule?")){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,i.deleteCapsule)(n);case 5:r(t.filter((function(e){return e._id!==n}))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),s("Failed to delete capsule");case 12:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return o?n.createElement("div",{className:"loading-container"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading content...")):u?n.createElement("div",{className:"error-container"},n.createElement("h2",null,"Error"),n.createElement("p",null,u),n.createElement("button",{onClick:j,className:"primary-button"},"Retry")):n.createElement("div",{className:"content-management tab-content"},n.createElement("h2",{className:"section-title"},"Content Management"),n.createElement("div",{className:"content-filters"},n.createElement("div",{className:"filter-group"},n.createElement("label",{htmlFor:"search"},"Search:"),n.createElement("input",{type:"text",id:"search",className:"search-input",placeholder:"Search capsules",value:b,onChange:function(e){return w(e.target.value)}})),n.createElement("div",{className:"filter-group"},n.createElement("label",{htmlFor:"public"},"Visibility:"),n.createElement("select",{id:"public",className:"filter-select",value:L,onChange:function(e){return O(e.target.value)}},n.createElement("option",{value:""},"All Capsules"),n.createElement("option",{value:"true"},"Public Only"),n.createElement("option",{value:"false"},"Private Only")))),n.createElement("div",{className:"capsules-grid"},0===t.length?n.createElement("p",{className:"no-content"},"No capsules found."):t.map((function(e){var t;return n.createElement("div",{key:e._id,className:"capsule-card"},n.createElement("div",{className:"capsule-header"},n.createElement("h3",null,e.title),e.featured&&n.createElement("span",{className:"featured-badge"},"Featured")),n.createElement("div",{className:"capsule-body"},n.createElement("p",null,e.content?e.content.substring(0,100)+(e.content.length>100?"...":""):"No content"),e.mediaType&&n.createElement("div",{className:"capsule-media-indicator"},"photo"===e.mediaType&&n.createElement("span",{className:"media-badge photo-badge"},"üì∏ Photo"),"video"===e.mediaType&&n.createElement("span",{className:"media-badge video-badge"},"üé• Video"),"audio"===e.mediaType&&n.createElement("span",{className:"media-badge audio-badge"},"üéôÔ∏è Audio")),n.createElement("div",{className:"capsule-meta"},n.createElement("span",null,"By: ",(null===(t=e.user)||void 0===t?void 0:t.name)||"Unknown"),n.createElement("span",null,"Created: ",new Date(e.createdAt).toLocaleDateString()),n.createElement("span",{className:"visibility-status ".concat(e.isPublic?"public":"private")},e.isPublic?"Public":"Private"))),n.createElement("div",{className:"capsule-actions"},n.createElement("button",{className:"action-button",onClick:function(){return k(e._id,e.isPublic)}},e.isPublic?"üîí Make Private":"üåé Make Public"),n.createElement("button",{className:"action-button",onClick:function(){return C(e._id,e.featured)}},e.featured?"‚≠ê Unfeature":"‚≠ê Feature"),n.createElement("button",{className:"action-button delete-button",onClick:function(){return _(e._id)}},"üóëÔ∏è Remove")))}))),n.createElement("div",{className:"pagination"},n.createElement("button",{onClick:function(){return p((function(e){return Math.max(e-1,1)}))},disabled:1===f},"Previous"),n.createElement("span",null,"Page ",f," of ",d),n.createElement("button",{onClick:function(){return p((function(e){return Math.min(e+1,d)}))},disabled:f===d},"Next")))};function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function k(){k=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:O(e,r,c)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function y(){}function g(){}function b(){}var E={};u(E,i,(function(){return this}));var w=Object.getPrototypeOf,N=w&&w(w(T([])));N&&N!==r&&n.call(N,i)&&(E=N);var x=b.prototype=y.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(a,o,i,c){var l=m(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==j(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function O(t,r,n){var a=f;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=C(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=d,n.method="throw",n.arg=u.arg)}}}function C(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,C(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(j(t)+" is not iterable")}return g.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(x),u(x,l,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;P(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const F=function(){var e=T((0,n.useState)([]),2),t=e[0],r=e[1],a=T((0,n.useState)(!0),2),o=a[0],c=a[1],l=T((0,n.useState)(null),2),u=l[0],s=l[1],m=T((0,n.useState)(1),2),f=m[0],p=m[1],h=T((0,n.useState)(1),2),d=h[0],v=h[1],y=T((0,n.useState)(""),2),g=y[0],b=y[1],E=T((0,n.useState)(""),2),w=E[0],N=E[1],x=T((0,n.useState)(""),2),S=x[0],L=x[1];(0,n.useEffect)((function(){O()}),[f,g,w,S]);var O=function(){var e,n=(e=k().mark((function e(){var n,a,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),s(null),n=_(_(_({},g&&{level:g}),w&&{startDate:w}),S&&{endDate:S}),e.prev=4,e.next=7,(0,i.getSystemLogs)(f,20,n);case 7:(a=e.sent)&&a.data&&Array.isArray(a.data)?(r(a.data),v((null===(o=a.pagination)||void 0===o?void 0:o.pages)||1)):0===t.length&&s("Received system logs in an unexpected format"),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(4),404!==e.t0.status){e.next=19;break}0===t.length&&s("System logs endpoint not available"),e.next=20;break;case 19:throw e.t0;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(0),s("Failed to load system logs. Keeping existing data.");case 26:return e.prev=26,c(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,22,26,29],[4,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){A(o,n,a,i,c,"next",e)}function c(e){A(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),j=function(e){switch(e){case"error":return"#E74C3C";case"warn":return"#F39C12";case"info":return"#3498DB";default:return"#95A5A6"}};return o?n.createElement("div",{className:"loading-container"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading system logs...")):u?n.createElement("div",{className:"error-container"},n.createElement("h2",null,"Error"),n.createElement("p",null,u),n.createElement("button",{onClick:O,className:"primary-button"},"Retry")):n.createElement("div",{className:"system-logs"},n.createElement("h2",null,"System Logs"),n.createElement("div",{className:"logs-filters"},n.createElement("div",{className:"filter-group"},n.createElement("label",{htmlFor:"level"},"Log Level:"),n.createElement("select",{id:"level",className:"filter-select",value:g,onChange:function(e){return b(e.target.value)}},n.createElement("option",{value:""},"All Levels"),n.createElement("option",{value:"info"},"Info"),n.createElement("option",{value:"warn"},"Warning"),n.createElement("option",{value:"error"},"Error"))),n.createElement("div",{className:"filter-group"},n.createElement("label",{htmlFor:"startDate"},"Start Date:"),n.createElement("input",{type:"date",id:"startDate",className:"date-input",value:w,onChange:function(e){return N(e.target.value)}})),n.createElement("div",{className:"filter-group"},n.createElement("label",{htmlFor:"endDate"},"End Date:"),n.createElement("input",{type:"date",id:"endDate",className:"date-input",value:S,onChange:function(e){return L(e.target.value)}})),n.createElement("button",{className:"primary-button",onClick:function(){N(""),L(""),b("")}},"Clear Filters")),n.createElement("div",{className:"logs-container"},0===t.length?n.createElement("p",{className:"no-logs"},"No logs found for the selected filters."):n.createElement("div",{className:"logs-list"},t.map((function(e){return n.createElement("div",{key:e.id,className:"log-entry"},n.createElement("div",{className:"log-header"},n.createElement("span",{className:"log-level",style:{backgroundColor:j(e.level)}},e.level.toUpperCase()),n.createElement("span",{className:"log-timestamp"},new Date(e.timestamp).toLocaleString()),n.createElement("span",{className:"log-source"},e.source)),n.createElement("div",{className:"log-message"},e.message),e.details&&n.createElement("div",{className:"log-details"},n.createElement("pre",null,JSON.stringify(e.details,null,2))))}))),n.createElement("div",{className:"pagination"},n.createElement("button",{className:"pagination-button",onClick:function(){f>1&&p(f-1)},disabled:1===f},"Previous"),n.createElement("span",{className:"pagination-current"},"Page ",f," of ",d),n.createElement("button",{className:"pagination-button",onClick:function(){f<d&&p(f+1)},disabled:f===d},"Next"))))};var D=r(4653),G=r(5721),I=r(9107),M=r(7984),U=r(3495),K=r(8687),V=r(7018),Y=r(6279),$=r(8224),B=r(1222),W=r(630),H=r(3161),J=r(2050),q=["type","data","dataKey","nameKey","valueKey","width","height","colors","xAxisLabel","yAxisLabel","title","tooltip","legend","emptyMessage"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(null,arguments)}const Q=function(e){var t=e.type,r=void 0===t?"line":t,a=e.data,o=void 0===a?[]:a,i=e.dataKey,c=e.nameKey,l=e.valueKey,u=e.width,s=void 0===u?"100%":u,m=e.height,f=void 0===m?300:m,p=e.colors,h=void 0===p?{primary:"#8E44AD",secondary:"#3498DB",accent:"#2ECC71",warning:"#F39C12",error:"#E74C3C"}:p,d=e.xAxisLabel,v=void 0===d?"":d,y=e.yAxisLabel,g=void 0===y?"":y,b=e.title,E=void 0===b?"":b,w=e.tooltip,N=void 0===w||w,x=e.legend,S=void 0===x||x,L=e.emptyMessage,O=void 0===L?"No data available":L,j=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,q),k=function(){return!o||!Array.isArray(o)||0===o.length||!o.some((function(e){return"line"===r||"bar"===r?!(!i||!e)&&(void 0!==e[i]&&null!==e[i]&&0!==e[i]&&""!==e[i]):"pie"===r&&(!(!l||!e)&&(void 0!==e[l]&&null!==e[l]&&0!==e[l]&&""!==e[l]))}))},C=k()?"line"===r||"bar"===r?Array.from({length:5},(function(e,t){var r={name:"Item ".concat(t+1)};return r[i]=0,r})):"pie"===r?[{name:"No Data",value:1}]:[]:o,_=[h.primary,h.secondary,h.accent,h.warning,h.error];if(k())return n.createElement("div",{className:"chart-container",style:{height:f,width:s,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},E&&n.createElement("h3",null,E),n.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70%",width:"100%",border:"1px dashed #ccc",borderRadius:"8px",backgroundColor:"#f9f9f9",color:"#666"}},n.createElement("p",null,O)));return n.createElement("div",{className:"chart-container"},E&&n.createElement("h3",null,E),function(){var e,t,a;switch(r){case"line":return n.createElement(D.u,{width:s,height:f},n.createElement(G.b,{data:C},n.createElement(I.d,{strokeDasharray:"3 3"}),n.createElement(M.W,{dataKey:"name",label:v?{value:v,position:"insideBottom",offset:-5}:void 0}),n.createElement(U.h,{label:g?{value:g,angle:-90,position:"insideLeft"}:void 0}),N&&n.createElement(K.m,null),S&&n.createElement(V.s,null),n.createElement(Y.N,z({type:"monotone",dataKey:i,stroke:h.primary,strokeWidth:2,activeDot:{r:8}},j.lineProps))));case"bar":return n.createElement(D.u,{width:s,height:f},n.createElement($.E,{data:C},n.createElement(I.d,{strokeDasharray:"3 3"}),n.createElement(M.W,{dataKey:"name",label:v?{value:v,position:"insideBottom",offset:-5}:void 0}),n.createElement(U.h,{label:g?{value:g,angle:-90,position:"insideLeft"}:void 0}),N&&n.createElement(K.m,null),S&&n.createElement(V.s,null),n.createElement(B.y,z({dataKey:i,fill:h.secondary},j.barProps))));case"pie":return n.createElement(D.u,{width:s,height:f},n.createElement(W.r,null,n.createElement(H.F,{data:C,cx:"50%",cy:"50%",outerRadius:(null===(e=j.pieProps)||void 0===e?void 0:e.outerRadius)||80,innerRadius:(null===(t=j.pieProps)||void 0===t?void 0:t.innerRadius)||0,fill:h.primary,paddingAngle:(null===(a=j.pieProps)||void 0===a?void 0:a.paddingAngle)||0,dataKey:l||"value",nameKey:c||"name",label:function(e){var t=e.name,r=e.percent;return"".concat(t,": ").concat((100*r).toFixed(0),"%")}},C.map((function(e,t){return n.createElement(J.f,{key:"cell-".concat(t),fill:_[t%_.length]})}))),N&&n.createElement(K.m,null),S&&n.createElement(V.s,null)));default:return n.createElement("div",null,"Unsupported chart type: ",r)}}())};r(5474);function X(){X=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),c=new _(n||[]);return a(i,"_invoke",{value:O(e,r,c)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function y(){}function g(){}function b(){}var E={};u(E,i,(function(){return this}));var w=Object.getPrototypeOf,N=w&&w(w(P([])));N&&N!==r&&n.call(N,i)&&(E=N);var x=b.prototype=y.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(a,o,i,c){var l=m(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Z(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function O(t,r,n){var a=f;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=j(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=d,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Z(t)+" is not iterable")}return g.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(x),u(x,l,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function ee(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ne=function(){var e,t,r,a,o,c,l,u,s,m,f,p,h,d,v,y,g,b,E,w,N,x,S=te((0,n.useState)(null),2),L=S[0],O=S[1],j=te((0,n.useState)(!0),2),k=j[0],C=j[1],_=te((0,n.useState)(null),2),P=_[0],A=_[1],T=te((0,n.useState)(!1),2),R=T[0],F=T[1],D={primary:"#8E44AD",secondary:"#3498DB",accent:"#2ECC71",warning:"#F39C12",error:"#E74C3C"},G=function(){var e,t=(e=X().mark((function e(){var t,r,n=arguments;return X().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.prev=1,t?F(!0):C(!0),A(null),e.prev=4,e.next=7,(0,i.getPaymentStats)(t);case 7:(r=e.sent)?t&&r.data&&"object"===Z(r.data)?O(r.data):r.paymentStats&&"object"===Z(r.paymentStats)?O(r.paymentStats):"object"!==Z(r)||void 0===r.totalRevenue&&void 0===r.subscriptionCounts?(L||O({totalRevenue:0,transactions:0,averageOrderValue:0,conversionRate:0,subscriptionCounts:{free:0,premium:0,vip:0},monthlyRevenue:{}}),A("Received payment statistics in an unexpected format")):O(r):L||O({totalRevenue:0,transactions:0,averageOrderValue:0,conversionRate:0,subscriptionCounts:{free:0,premium:0,vip:0},monthlyRevenue:{}}),e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(4),404!==e.t0.status){e.next=19;break}L||O({totalRevenue:0,transactions:0,averageOrderValue:0,conversionRate:0,subscriptionCounts:{free:0,premium:0,vip:0},monthlyRevenue:{}}),e.next=20;break;case 19:throw e.t0;case 20:e.next=27;break;case 22:e.prev=22,e.t1=e.catch(1),A("Failed to load payment statistics. Please try again."),L||O({totalRevenue:0,transactions:0,averageOrderValue:0,conversionRate:0,subscriptionCounts:{free:0,premium:0,vip:0},monthlyRevenue:{}});case 27:return e.prev=27,C(!1),F(!1),e.finish(27);case 31:case"end":return e.stop()}}),e,null,[[1,22,27,31],[4,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ee(o,n,a,i,c,"next",e)}function c(e){ee(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,n.useEffect)((function(){G()}),[]);var I=function(){G(!0)};if(k&&!R)return n.createElement("div",{className:"loading-container"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading payment statistics..."));if(P)return n.createElement("div",{className:"error-container"},n.createElement("h2",null,"Error"),n.createElement("p",null,P),n.createElement("button",{onClick:function(){return G()},className:"primary-button"},"Retry"));var M=L||{totalRevenue:0,transactions:0,averageOrderValue:0,conversionRate:0,subscriptionCounts:{free:0,premium:0,vip:0},monthlyRevenue:{}};if(!(M&&M.subscriptionCounts&&(M.subscriptionCounts.free>0||M.subscriptionCounts.premium>0||M.subscriptionCounts.vip>0||M.totalRevenue>0||M.transactions>0)))return n.createElement("div",{className:"empty-data"},n.createElement("h2",null,"No Payment Data Available"),n.createElement("p",null,"There are no payment statistics to display yet. This could be because no users have registered or made payments in the system."),n.createElement("button",{onClick:I,className:"primary-button"},"Refresh Stats"));var U=M.subscriptionCounts&&(M.subscriptionCounts.free>0||M.subscriptionCounts.premium>0||M.subscriptionCounts.vip>0)?[{name:"Free",value:M.subscriptionCounts.free||0},{name:"Premium",value:M.subscriptionCounts.premium||0},{name:"VIP",value:M.subscriptionCounts.vip||0}]:[{name:"No Data",value:1}],K=[];if(M.monthlyRevenue&&Object.keys(M.monthlyRevenue).length>0&&(K=Object.entries(M.monthlyRevenue).map((function(e){var t=te(e,2);return{month:t[0],revenue:t[1]}})).sort((function(e,t){return e.month.localeCompare(t.month)}))),K.length<6){var V=Array.from({length:6},(function(e,t){var r=new Date;return r.setMonth(r.getMonth()-t),"".concat(r.getFullYear(),"-").concat(String(r.getMonth()+1).padStart(2,"0"))})).reverse();K=V.map((function(e){return K.find((function(t){return t.month===e}))||{month:e,revenue:0}}))}var Y=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},$=function(e){return"".concat(e.toFixed(2),"%")};return n.createElement("div",{className:"payment-stats"},n.createElement("div",{className:"stats-header"},n.createElement("h2",null,"Payment Statistics"),n.createElement("button",{onClick:I,className:"refresh-button",disabled:R},R?"Refreshing...":"Refresh Data")),n.createElement("div",{className:"stats-cards"},n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,Y(M.totalRevenue||0)),n.createElement("p",null,"Total Revenue")),n.createElement("div",{className:"card-icon"},"üí∞")),n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,M.transactions||0),n.createElement("p",null,"Total Transactions")),n.createElement("div",{className:"card-icon"},"üìä")),n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,Y(M.averageOrderValue||0)),n.createElement("p",null,"Average Order Value")),n.createElement("div",{className:"card-icon"},"üìà")),n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,$(M.conversionRate||0)),n.createElement("p",null,"Conversion Rate")),n.createElement("div",{className:"card-icon"},"üîÑ"))),n.createElement("div",{className:"charts-grid"},n.createElement("div",{className:"chart-container"},n.createElement(Q,{type:"line",data:K,dataKey:"revenue",title:"Monthly Revenue",height:300,colors:D,emptyMessage:"No revenue data available yet",tooltip:{formatter:function(e){return["$".concat(e),"Revenue"]}},yAxisLabel:"Revenue ($)"})),n.createElement("div",{className:"chart-container"},n.createElement(Q,{type:"pie",data:U,valueKey:"value",nameKey:"name",title:"Subscription Distribution",height:300,colors:D,emptyMessage:"No subscription data available yet",tooltip:{formatter:function(e){return[e,"Users"]}},pieProps:{innerRadius:60,outerRadius:80,paddingAngle:5}}))),n.createElement("div",{className:"subscription-details"},n.createElement("h3",null,"Subscription Details"),n.createElement("div",{className:"subscription-table"},n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"Plan"),n.createElement("th",null,"Users"),n.createElement("th",null,"% of Total"),n.createElement("th",null,"Monthly Revenue"))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",null,"Free"),n.createElement("td",null,(null===(e=M.subscriptionCounts)||void 0===e?void 0:e.free)||0),n.createElement("td",null,$(((null===(t=M.subscriptionCounts)||void 0===t?void 0:t.free)||0)/(((null===(r=M.subscriptionCounts)||void 0===r?void 0:r.free)||0)+((null===(a=M.subscriptionCounts)||void 0===a?void 0:a.premium)||0)+((null===(o=M.subscriptionCounts)||void 0===o?void 0:o.vip)||0))*100||0)),n.createElement("td",null,"$0.00")),n.createElement("tr",null,n.createElement("td",null,"Premium"),n.createElement("td",null,(null===(c=M.subscriptionCounts)||void 0===c?void 0:c.premium)||0),n.createElement("td",null,$(((null===(l=M.subscriptionCounts)||void 0===l?void 0:l.premium)||0)/(((null===(u=M.subscriptionCounts)||void 0===u?void 0:u.free)||0)+((null===(s=M.subscriptionCounts)||void 0===s?void 0:s.premium)||0)+((null===(m=M.subscriptionCounts)||void 0===m?void 0:m.vip)||0))*100||0)),n.createElement("td",null,Y(9.99*((null===(f=M.subscriptionCounts)||void 0===f?void 0:f.premium)||0)))),n.createElement("tr",null,n.createElement("td",null,"VIP"),n.createElement("td",null,(null===(p=M.subscriptionCounts)||void 0===p?void 0:p.vip)||0),n.createElement("td",null,$(((null===(h=M.subscriptionCounts)||void 0===h?void 0:h.vip)||0)/(((null===(d=M.subscriptionCounts)||void 0===d?void 0:d.free)||0)+((null===(v=M.subscriptionCounts)||void 0===v?void 0:v.premium)||0)+((null===(y=M.subscriptionCounts)||void 0===y?void 0:y.vip)||0))*100||0)),n.createElement("td",null,Y(24.99*((null===(g=M.subscriptionCounts)||void 0===g?void 0:g.vip)||0))))),n.createElement("tfoot",null,n.createElement("tr",null,n.createElement("td",null,n.createElement("strong",null,"Total")),n.createElement("td",null,n.createElement("strong",null,((null===(b=M.subscriptionCounts)||void 0===b?void 0:b.free)||0)+((null===(E=M.subscriptionCounts)||void 0===E?void 0:E.premium)||0)+((null===(w=M.subscriptionCounts)||void 0===w?void 0:w.vip)||0))),n.createElement("td",null,"100%"),n.createElement("td",null,n.createElement("strong",null,Y(9.99*((null===(N=M.subscriptionCounts)||void 0===N?void 0:N.premium)||0)+24.99*((null===(x=M.subscriptionCounts)||void 0===x?void 0:x.vip)||0))))))))))};function ae(){ae=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),c=new _(n||[]);return a(i,"_invoke",{value:O(e,r,c)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function y(){}function g(){}function b(){}var E={};u(E,i,(function(){return this}));var w=Object.getPrototypeOf,N=w&&w(w(P([])));N&&N!==r&&n.call(N,i)&&(E=N);var x=b.prototype=y.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(a,o,i,c){var l=m(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==oe(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function O(t,r,n){var a=f;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=j(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=d,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(oe(t)+" is not iterable")}return g.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(x),u(x,l,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const ue=function(){var e=ce((0,n.useState)(null),2),t=e[0],r=e[1],a=ce((0,n.useState)(!0),2),o=a[0],c=a[1],l=ce((0,n.useState)(null),2),u=l[0],s=l[1],m=ce((0,n.useState)(!1),2),f=m[0],p=m[1],h={primary:"#8E44AD",secondary:"#3498DB",accent:"#2ECC71",warning:"#F39C12",error:"#E74C3C"};(0,n.useEffect)((function(){d()}),[]);var d=function(){var e,n=(e=ae().mark((function e(){var n;return ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),s(null),p(!1),e.prev=4,e.next=7,(0,i.getAdminStats)();case 7:(n=e.sent)&&"object"===oe(n)?n.data&&"object"===oe(n.data)&&n.data.users&&"object"===oe(n.data.users)?r(n.data):(t||r(v()),s("The user statistics data returned has an unexpected format.")):(t||r(v()),s("Received invalid data format from server")),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(4),404!==e.t0.status){e.next=18;break}t||r(v()),e.next=19;break;case 18:throw e.t0;case 19:e.next=26;break;case 21:e.prev=21,e.t1=e.catch(0),s("Failed to load user statistics. Using existing data."),t||r(v());case 26:return e.prev=26,c(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,21,26,29],[4,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ie(o,n,a,i,c,"next",e)}function c(e){ie(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),v=function(){return{users:{total:1250,new:87,byRole:[{_id:"user",count:1200},{_id:"moderator",count:20},{_id:"content_curator",count:15},{_id:"admin",count:15}],bySubscription:[{_id:"free",count:980},{_id:"premium",count:210},{_id:"vip",count:60}],monthlyTrend:[{month:"2025-01",count:1080},{month:"2025-02",count:1150},{month:"2025-03",count:1210},{month:"2025-04",count:1250}]},capsules:{total:3450,public:1230,new:342,dailyTrend:Array.from({length:30},(function(e,t){return{date:new Date(Date.now()-24*(29-t)*60*60*1e3).toISOString().slice(0,10),count:Math.floor(40*Math.random())+10}}))},activeSessions:{current:42,peak:65},systemStatus:{healthy:!0,errorRate:.5,avgResponseTime:135}}},y=function(){d(),p(!0)};if(o&&!f)return n.createElement("div",{className:"loading-container"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading user statistics..."));if(u&&!t)return n.createElement("div",{className:"error-container"},n.createElement("h2",null,"Error"),n.createElement("p",null,u),n.createElement("button",{onClick:d,className:"primary-button"},"Retry"));if(!t)return n.createElement("div",{className:"empty-data"},n.createElement("h2",null,"No User Data Available"),n.createElement("p",null,"There are no user statistics to display yet."),n.createElement("button",{onClick:y,className:"primary-button"},"Refresh Stats"));var g=Array.isArray(t.users.byRole)&&t.users.byRole.length>0?t.users.byRole.map((function(e){return{name:e._id?e._id.charAt(0).toUpperCase()+e._id.slice(1):"Unknown",value:e.count}})):[{name:"No Data",value:1}],b=Array.isArray(t.users.bySubscription)&&t.users.bySubscription.length>0?t.users.bySubscription.map((function(e){return{name:e._id?e._id.charAt(0).toUpperCase()+e._id.slice(1):"Unknown",value:e.count}})):[{name:"No Data",value:1}],E=Array.isArray(t.users.monthlyTrend)&&t.users.monthlyTrend.length>0?t.users.monthlyTrend.map((function(e){return{month:e.month.substring(5),users:e.count}})):Array.from({length:6},(function(e,t){var r=new Date;return r.setMonth(r.getMonth()-t),{month:"".concat(String(r.getMonth()+1).padStart(2,"0")),users:0}})).reverse(),w=Array.isArray(t.capsules.dailyTrend)&&t.capsules.dailyTrend.length>0?t.capsules.dailyTrend.slice(-10).map((function(e){return{date:e.date.substring(5),capsules:e.count}})):Array.from({length:10},(function(e,t){var r=new Date;return r.setDate(r.getDate()-t),{date:"".concat(String(r.getMonth()+1).padStart(2,"0"),"-").concat(String(r.getDate()).padStart(2,"0")),capsules:0}})).reverse();return n.createElement("div",{className:"user-stats"},n.createElement("div",{className:"stats-header"},n.createElement("h2",null,"User & Capsule Statistics"),n.createElement("button",{onClick:y,className:"refresh-button",disabled:f},f?"Refreshing...":"Refresh Data")),n.createElement("div",{className:"stats-cards"},n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,t.users.total.toLocaleString()),n.createElement("p",null,"Total Users")),n.createElement("div",{className:"card-icon users-icon"},"üë•")),n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,t.users.new.toLocaleString()),n.createElement("p",null,"New Users (30 days)")),n.createElement("div",{className:"card-icon new-users-icon"},"üÜï")),n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,t.capsules.total.toLocaleString()),n.createElement("p",null,"Total Capsules")),n.createElement("div",{className:"card-icon capsules-icon"},"üì¶")),n.createElement("div",{className:"card"},n.createElement("div",{className:"card-content"},n.createElement("h2",null,t.activeSessions.current.toLocaleString()),n.createElement("p",null,"Active Users")),n.createElement("div",{className:"card-icon active-icon"},"üü¢"))),n.createElement("div",{className:"charts-grid"},n.createElement("div",{className:"chart-container"},n.createElement(Q,{type:"line",data:E,dataKey:"users",title:"User Growth",height:250,colors:h,emptyMessage:"No user growth data available yet"})),n.createElement("div",{className:"chart-container"},n.createElement(Q,{type:"bar",data:w,dataKey:"capsules",title:"Daily Capsules Created",height:250,colors:h,emptyMessage:"No capsules have been created yet"})),n.createElement("div",{className:"chart-container"},n.createElement(Q,{type:"pie",data:g,valueKey:"value",nameKey:"name",title:"User Roles Distribution",height:250,colors:h,emptyMessage:"No role distribution data available yet"})),n.createElement("div",{className:"chart-container"},n.createElement(Q,{type:"pie",data:b,valueKey:"value",nameKey:"name",title:"Subscriptions Distribution",height:250,colors:h,emptyMessage:"No subscription data available yet"}))),n.createElement("div",{className:"system-status-panel"},n.createElement("h3",null,"System Status"),n.createElement("div",{className:"status-indicators"},n.createElement("div",{className:"status-item ".concat(t.systemStatus.healthy?"healthy":"unhealthy")},n.createElement("div",{className:"status-icon"},t.systemStatus.healthy?"‚úÖ":"‚ùå"),n.createElement("div",{className:"status-label"},"System Health")),n.createElement("div",{className:"status-item"},n.createElement("div",{className:"status-value"},t.systemStatus.errorRate.toFixed(2),"%"),n.createElement("div",{className:"status-label"},"Error Rate")),n.createElement("div",{className:"status-item"},n.createElement("div",{className:"status-value"},t.systemStatus.avgResponseTime," ms"),n.createElement("div",{className:"status-label"},"Avg Response Time")),n.createElement("div",{className:"status-item"},n.createElement("div",{className:"status-value"},t.activeSessions.peak),n.createElement("div",{className:"status-label"},"Peak Sessions")))),u&&n.createElement("div",{className:"error-message"},n.createElement("p",null,"Note: ",u)))};function se(){se=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),c=new _(n||[]);return a(i,"_invoke",{value:O(e,r,c)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",p="suspendedYield",h="executing",d="completed",v={};function y(){}function g(){}function b(){}var E={};u(E,i,(function(){return this}));var w=Object.getPrototypeOf,N=w&&w(w(P([])));N&&N!==r&&n.call(N,i)&&(E=N);var x=b.prototype=y.prototype=Object.create(E);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(a,o,i,c){var l=m(e[a],e,o);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==me(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function O(t,r,n){var a=f;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var l=j(c,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var u=m(t,r,n);if("normal"===u.type){if(a=n.done?d:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=d,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=m(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(me(t)+" is not iterable")}return g.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},S(L.prototype),u(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new L(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(x),u(x,l,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return c.type="throw",c.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function me(e){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(e)}function fe(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?he(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const de=function(){var e=pe((0,n.useState)(null),2),t=e[0],r=e[1],a=pe((0,n.useState)(!0),2),o=a[0],c=a[1],l=pe((0,n.useState)(null),2),u=l[0],s=l[1],m=pe((0,n.useState)(!1),2),f=m[0],p=m[1];(0,n.useEffect)((function(){h()}),[]);var h=function(){var e,n=(e=se().mark((function e(){var n,a,o=arguments;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>0&&void 0!==o[0]&&o[0],e.prev=1,n?p(!0):c(!0),s(null),e.prev=4,e.next=7,(0,i.getAdminDashboardSummary)();case 7:(a=e.sent)&&"object"===me(a)?r(a):(t||r(d()),s("Received invalid data format from server")),e.next=19;break;case 11:if(e.prev=11,e.t0=e.catch(4),404!==e.t0.status){e.next=18;break}t||r(d()),e.next=19;break;case 18:throw e.t0;case 19:e.next=26;break;case 21:e.prev=21,e.t1=e.catch(1),s("Failed to load dashboard statistics. Please try again."),t||r(d());case 26:return e.prev=26,c(!1),p(!1),e.finish(26);case 30:case"end":return e.stop()}}),e,null,[[1,21,26,30],[4,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){fe(o,n,a,i,c,"next",e)}function c(e){fe(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),d=function(){return{users:{total:580,newToday:15,activeNow:48},capsules:{total:1250,public:750,createdToday:35},revenue:{total:12500,lastMonth:1850,conversionRate:8.5},system:{responseTime:250,errorRate:.8,uptime:99.95}}};if(o&&!f)return n.createElement("div",{className:"dashboard-summary loading"},n.createElement("div",{className:"loading-spinner"}),n.createElement("p",null,"Loading dashboard statistics..."));var v,y,g,b=t||{users:{total:0,newToday:0,activeNow:0},capsules:{total:0,public:0,createdToday:0},revenue:{total:0,lastMonth:0,conversionRate:0},system:{responseTime:0,errorRate:0,uptime:100}},E=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},w=(v=b.system,y=v.errorRate,g=v.uptime,y<1&&g>99.9?{status:"Excellent",color:"#2ECC71"}:y<2&&g>99.5?{status:"Good",color:"#3498DB"}:y<5&&g>99?{status:"Fair",color:"#F39C12"}:{status:"Poor",color:"#E74C3C"});return n.createElement("div",{className:"dashboard-summary"},n.createElement("div",{className:"summary-header"},n.createElement("h2",null,"Dashboard Overview"),n.createElement("button",{className:"refresh-button",onClick:function(){h(!0)},disabled:f},f?"Refreshing...":"Refresh")),n.createElement("div",{className:"summary-grid"},n.createElement("div",{className:"summary-section users"},n.createElement("h3",null,"Users"),n.createElement("div",{className:"metrics"},n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},b.users.total.toLocaleString()),n.createElement("span",{className:"label"},"Total Users")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},"+",b.users.newToday.toLocaleString()),n.createElement("span",{className:"label"},"New Today")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},b.users.activeNow.toLocaleString()),n.createElement("span",{className:"label"},"Active Now")))),n.createElement("div",{className:"summary-section capsules"},n.createElement("h3",null,"Capsules"),n.createElement("div",{className:"metrics"},n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},b.capsules.total.toLocaleString()),n.createElement("span",{className:"label"},"Total Capsules")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},b.capsules.public.toLocaleString()),n.createElement("span",{className:"label"},"Public Capsules")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},"+",b.capsules.createdToday.toLocaleString()),n.createElement("span",{className:"label"},"Created Today")))),n.createElement("div",{className:"summary-section revenue"},n.createElement("h3",null,"Revenue"),n.createElement("div",{className:"metrics"},n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},E(b.revenue.total)),n.createElement("span",{className:"label"},"Total Revenue")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},E(b.revenue.lastMonth)),n.createElement("span",{className:"label"},"Last Month")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},b.revenue.conversionRate.toFixed(1),"%"),n.createElement("span",{className:"label"},"Conversion Rate")))),n.createElement("div",{className:"summary-section system"},n.createElement("h3",null,"System Health"),n.createElement("div",{className:"metrics"},n.createElement("div",{className:"metric"},n.createElement("span",{className:"value",style:{color:w.color}},w.status),n.createElement("span",{className:"label"},"Status")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},b.system.responseTime,"ms"),n.createElement("span",{className:"label"},"Response Time")),n.createElement("div",{className:"metric"},n.createElement("span",{className:"value"},b.system.uptime.toFixed(2),"%"),n.createElement("span",{className:"label"},"Uptime"))))),u&&n.createElement("div",{className:"error-message"},n.createElement("p",null,u)))};var ve=r(6585);function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,c=[],l=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}const be=function(){var e=(0,o.A)(),t=e.user,r=e.isLoggedIn,i=ye((0,n.useState)("overview"),2),c=i[0],l=i[1],u=t&&"admin"===t.role;return r?r&&!u?n.createElement(a.C5,{to:"/dashboard"}):n.createElement("div",{className:"admin-dashboard"},n.createElement(ve.A,{title:"Admin Dashboard - Memorix",description:"Memorix admin dashboard for managing users, content, and system statistics.",keywords:"admin dashboard, user management, content management, payment statistics, system metrics",noindex:!0}),n.createElement("header",{className:"dashboard-header"},n.createElement("h1",null,"Admin Dashboard"),n.createElement("div",{className:"user-welcome"},n.createElement("span",null,"Welcome, ",null==t?void 0:t.name),n.createElement("span",{className:"user-role"},null==t?void 0:t.role))),n.createElement("div",{className:"tabs"},n.createElement("button",{className:"overview"===c?"active":"",onClick:function(){return l("overview")}},"Overview"),n.createElement("button",{className:"users"===c?"active":"",onClick:function(){return l("users")}},"Users"),n.createElement("button",{className:"content"===c?"active":"",onClick:function(){return l("content")}},"Content"),n.createElement("button",{className:"logs"===c?"active":"",onClick:function(){return l("logs")}},"System")),"overview"===c&&n.createElement(n.Fragment,null,n.createElement(de,null),n.createElement(ue,null),n.createElement(ne,null)),"users"===c&&n.createElement(v,null),"content"===c&&n.createElement(O,null),"logs"===c&&n.createElement(F,null)):n.createElement(a.C5,{to:"/login"})}}}]);